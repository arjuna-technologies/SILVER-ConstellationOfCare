<mat-card>
  <mat-card-header>
    <mat-card-title [className]="'familyFormTitle'">
      <h3 *ngIf="!consented">{{familyMember.getFullName()}} is <span class='consent-status not-consented'>not currently consented</span> for case {{caseID}}.
      </h3>
      <h3 *ngIf="consented">{{familyMember.getFullName()}} is currently <span class='consent-status consented'>consented</span> for case {{caseID}}.</h3>
    </mat-card-title>
    <mat-card-subtitle *ngIf="otherConsentedCaseIDs.length>1">
      <h4>Warning: {{familyMember.getFullName()}} has already been consented in the following cases: {{otherConsentedCaseIDs.join(", ")}}.</h4>
    </mat-card-subtitle>
    <mat-card-subtitle *ngIf="otherConsentedCaseIDs.length==1">
      <h4>Warning: {{familyMember.getFullName()}} has <span class='consent-status already-consented'>already been consented</span> in case {{otherConsentedCaseIDs[0]}}.</h4>
    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <mat-divider [inset]="true"></mat-divider>
    <h3>Consent Statement</h3>
    <h2>
      I am happy for my records held by my GP surgery to be viewed by Gateshead Council to inform the care my family and
      I receive from Gateshead Council Early Help services.<br/>
      I understand that I can change my mind and choose not to give consent at any time, by informing my support worker.<br/>
      They will record my choice, which will stop any records being viewed in the future.
    </h2>
    <h4>Purpose</h4>
    <p>Your worker from the Early Help team will be able to see your records held by your GP surgery.<br/>
      It will help them to know about any illnesses or problems you have.<br/>
      They can talk to you about this if you wish, and think about how they can support you and your family.</p>
    <h4>Details</h4>
    <ul>
      <li>Illnesses or problems you have talked to medical staff at your GP surgery about.</li>
      <li>Details of when you have seen the doctor or nurse, and visits you have booked and did not go to.</li>
      <li>Names and roles of health staff you have seen.</li>
      <li>Name and roles of health staff your details have been sent to if you need further care, and the reason why you
        need further care.
      </li>
    </ul>
    <mat-divider [inset]="false"></mat-divider>
    <h3>Support Worker Agreement</h3>
    <p>
      I, [Support Worker Name], confirm that in recording the consent for {{familyMember.getFullName()}} by pressing the
      'Record Consent' button below, that this individual has read or been read the entirety of the text above and has
      given their consent verbally or writing.<br/>
      I also confirm that should this individual inform me that they wish to revoke their consent for this purpose, I
      will return to this page and update their consent using the 'Revoke Consent' button below, at my earliest
      convenience.<br/>
      I understand that all consent changes I make will be logged with my name, for audit purposes.
    </p>
  </mat-card-content>
  <mat-card-actions>
    <div [style.textAlign]="'center'">
      <button mat-stroked-button color="primary" id='record-consent' [disabled]="!familyMember.nhsNumber" (click)="recordConsent()">Record
        Consent for {{familyMember.getFullName()}}
      </button>
      <button mat-stroked-button color="primary" id='revoke-consent' [disabled]="!familyMember.nhsNumber" (click)="revokeConsent()">Revoke
        Consent for {{familyMember.getFullName()}}
      </button>
      <button mat-stroked-button color="primary" (click)="closePanel()"><span>Back to Family</span></button>
    </div>
  </mat-card-actions>
</mat-card>
