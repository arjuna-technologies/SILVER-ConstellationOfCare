<div class="main-page">
  <mat-toolbar color="primary" [class.fixed]="fixed">
    <mat-toolbar-row>
      <span>SILVER Health Data Interface</span>
      <span class="toolbar-spacer"></span>
      <div *ngIf="username">
        <cnstll-family-chooser-button [username]="username" #familyChooserButton [families]="families" [family]="family"
                                      [familyMember]="familyMember" [mode]="mode"
                                      (selectFamilyOnly)="doSelectFamilyOnly($event)"></cnstll-family-chooser-button>
        <cnstll-family-member-chooser-button #familyMemberChooserButton *ngIf="family" [families]="families"
                                             [family]="family" [familyMember]="familyMember" [mode]="mode"
                                             (selectFamilyOnly)="doSelectFamilyOnly($event)"
                                             (inspectFamilyMember)="doInspectFamilyMember($event)"></cnstll-family-member-chooser-button>
        <cnstll-case-management-button #caseManagementButton [families]="families" [family]="family"
                                       [familyMember]="familyMember" [mode]="mode" [username]="username"
                                       (launchCaseManagementScreen)="doSelectFamilyOnly(null)"></cnstll-case-management-button>
      </div>
      <button mat-button (click)="doOpenLoginDialog()">
        <mat-icon>home</mat-icon>
        <span *ngIf="username" title="Click to change user"> {{username}} </span>
        <span *ngIf="! username"> Login </span>
      </button>
    </mat-toolbar-row>
  </mat-toolbar>

  <cnstll-mig-information #miginformation *ngIf="mode=='mig'&&familyMember" [families]="families" [family]="family"
                          [familyMember]="familyMember" [mode]="mode"
                          (close)="doSelectFamilyOnly($event)"></cnstll-mig-information>
  <cnstll-case-management-screen #caseManagementScreen *ngIf="username&&mode=='cases'" [families]="families"
                                 [family]="family"
                                 [familyMember]="familyMember" [mode]="mode" [username]="username"
                                 (updateFamilies)="doUpdateFamilies($event)"
                                 (selectFamilyOnly)="doSelectFamilyOnly($event)"
                                 (selectFamilyAndFamilyMember)="doSelectFamilyAndFamilyMember($event)"
                                 (inspectFamilyMember)="doInspectFamilyMember($event)"></cnstll-case-management-screen>
</div>
